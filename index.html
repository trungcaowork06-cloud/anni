<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy anniversary</title>
<style>
        body {
            margin: 0;
            padding: 0;
            background-color: #fef0f7;
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }



        .page {
            text-align: center;
            margin-bottom: 50px;
            display: none;
        }

        .page.active {
            display: block;
        }

        .title {
            font-size: 48px;
            font-weight: bold;
            color: #444;
            margin: 0;
            line-height: 1.2;
        }

        .subtitle {
            color: #e889aa;
            font-size: 48px;
            font-weight: bold;
            margin: 0;
            display: inline;
        }

        .emoji {
            font-size: 48px;
            margin-left: 10px;
            color: #444;
        }

        .instruction {
            color: #6d7e96;
            font-size: 18px;
            margin: 30px 0;
            font-weight: 500;
        }

        .next-btn {
            background: #e889aa;
            color: white;
            border: none;
            padding: 15px 60px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(232, 137, 170, 0.3);
        }

        .next-btn:hover {
            background: #d577a0;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(232, 137, 170, 0.4);
        }

        .next-btn:active {
            transform: translateY(0);
        }

        /* Page 2 styles */
        .envelope-img, .crying-img, .header-img {
            max-width: 300px;
            height: auto;
            margin-bottom: 30px;
        }
        
        .crying-img {
            margin-top: 20px;
        }
        
        .header-img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 5px solid white;
            transform: rotate(-3deg);
            transition: transform 0.3s ease;
        }
        
        .header-img:hover {
            transform: rotate(3deg);
        }

        .question-text {
            font-size: 20px;
            font-weight: bold;
            color: #7a4b73;
            margin: 0 <br>
        }
        
        .plea-title {
            font-size: 36px;
            font-weight: bold;
            color: #444;
            margin: 5px 0;
            line-height: 1.2;
        }
        
        .plea-subtitle {
            font-size: 32px;
            font-weight: bold;
            color: #444;
            margin: 5px 0 40px 0;
        }

        .button-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        .choice-btn {
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .open-btn {
            background: #e889aa;
            color: white;
            box-shadow: 0 4px 15px rgba(232, 137, 170, 0.3);
        }

        .open-btn:hover {
            background: #d577a0;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(232, 137, 170, 0.4);
        }

        .no-btn {
            background: #7dd3c0;
            color: white;
            box-shadow: 0 4px 15px rgba(125, 211, 192, 0.3);
        }

        .no-btn:hover {
            background: #6bc4b0;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(125, 211, 192, 0.4);
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .letter-container {
            background: #fff;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: slideIn 0.3s ease;
        }

        .letter-header {
            background: #ffd6e4;
            padding: 15px 20px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ffc0d5;
        }

        .letter-title {
            font-size: 20px;
            font-weight: bold;
            color: #7a4b73;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7a4b73;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }

        .close-btn:hover {
            background: #ffbcd5;
        }

        .letter-content {
            padding: 30px;
            padding-top: 1px ;
            background-color: #ffebf2; /* Â§áÁî®ËÉåÊôØËâ≤ */
            background-image: url('rjonvzwh90.png');
            background-size: 100% 100%;
            min-height: 500px;
            position: relative;
        }

        .letter-greeting {
            font-size: 24px;
            font-weight: bold;
            color: #7a4b73;
            margin-bottom: 30px;
            margin-top: 30px;
            font-style: italic;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        }

        .letter-text {
            font-size: 16px;
            line-height: 1.8;
            color: #7a4b73;
            margin-bottom: 20px;
            margin-top: 20px;
            text-align: left;
            font-style: italic;
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.7);
            padding: 0 20px;
        }

        .letter-signature {
            text-align: right;
            font-style: italic;
            color: #7a4b73;
            margin-top: 40px;
            padding-right: 20px;
            margin-bottom: 30px;
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.7);
        }
        
        [contenteditable="true"]:focus {
            outline: 2px dashed rgba(255, 150, 180, 0.5);
            padding: 5px;
            border-radius: 5px;
        }
        
        .letter-actions {
            text-align: center;
            margin-bottom: 30px;
        }
        


        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        /* ÊâãÊú∫Á´ØÈÄÇÈÖç */
        @media (max-width: 768px) {
            .title {
                font-size: 32px;
            }
            
            .subtitle {
                font-size: 32px;
            }
            
            .emoji {
                font-size: 32px;
            }
            
            .header-img {
                width: 150px;
                height: 150px;
                border-radius: 12px;
            }
            
            .instruction {
                font-size: 16px;
                margin: 20px 0;
            }
            
            .next-btn {
                padding: 12px 40px;
                font-size: 16px;
            }
            
            .envelope-img, .crying-img {
                max-width: 250px;
            }
            
            .question-text {
                font-size: 20px;
                margin: 15px 0 30px 0;
            }
            
            .plea-title {
                font-size: 28px;
            }
            
            .plea-subtitle {
                font-size: 24px;
            }
            
            .choice-btn {
                padding: 12px 30px;
                font-size: 16px;
            }
            
            .button-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .letter-container {
                width: 95%;
                max-height: 85vh;
            }
            
            .letter-content {
                padding: 20px;
            }
            
            .letter-greeting {
                font-size: 20px;
                margin-top: 40px;
            }
            
            .letter-text {
                font-size: 14px;
                padding: 0 10px;
            }
            
            .letter-signature {
                padding-right: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .title {
                font-size: 28px;
            }
            
            .subtitle {
                font-size: 28px;
            }
            
            .emoji {
                font-size: 28px;
            }
            
            .header-img {
                width: 120px;
                height: 120px;
                border-radius: 10px;
            }
            
            .instruction {
                font-size: 14px;
            }
            
            .plea-title {
                font-size: 24px;
            }
            
            .plea-subtitle {
                font-size: 20px;
            }
            
            .envelope-img, .crying-img {
                max-width: 200px;
            }
            
            .letter-container {
                width: 98%;
            }
            
            .letter-content {
                padding: 15px;
            }
            
            .letter-greeting {
                font-size: 18px;
            }
            
            .letter-text {
                font-size: 13px;
            }
        }
        
        /* Èü≥‰πêÊéßÂà∂Âô®Ê†∑Âºè */
        .music-control-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .music-control {
            background: rgba(232, 137, 170, 0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(232, 137, 170, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .music-control:hover {
            background: rgba(213, 119, 160, 0.9);
            transform: scale(1.1);
        }
        
        .music-control.playing {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 4px 15px rgba(232, 137, 170, 0.3); }
            50% { box-shadow: 0 4px 25px rgba(232, 137, 170, 0.6); }
            100% { box-shadow: 0 4px 15px rgba(232, 137, 170, 0.3); }
        }
        
        .volume-control {
            display: none;
            flex-direction: column;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 10px;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            min-width: 60px;
        }
        
        .music-control-container:hover .volume-control {
            display: flex;
        }
        
        .volume-slider {
            writing-mode: vertical-lr;
            direction: rtl;
            width: 20px;
            height: 80px;
            background: linear-gradient(to top, #e889aa, #f0f0f0);
            border-radius: 10px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #e889aa;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #e889aa;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .volume-label {
            font-size: 12px;
            color: #666;
            margin-top: 8px;
            font-weight: bold;
        }
        
        .music-tooltip {
            position: absolute;
            bottom: 60px;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
            pointer-events: none;
        }
        
        .music-control:hover .music-tooltip {
            opacity: 1;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .music-control-container {
                bottom: 15px;
                right: 15px;
            }
            
            .music-control {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            
            .volume-control {
                padding: 10px 8px;
            }
            
            .volume-slider {
                height: 60px;
                width: 18px;
            }
        }
    </style>
</head>
<body>
    <!-- ËÉåÊôØÈü≥‰πê -->
    <audio id="bgMusic" loop>
        <source src="xoa0x82ghj.mp3" type="audio/mpeg">
    </audio>
    
    <!-- ÁÇπÂáªÈü≥Êïà -->
    <audio id="clickSound">
        <source src="2568.wav" type="audio/wav">
    </audio>
    
    <!-- Èü≥‰πêÊéßÂà∂ÂÆπÂô® -->
    <div class="music-control-container">
        <div class="volume-control">
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="70" orient="vertical">
            <div class="volume-label" id="volumeLabel">70%</div>
        </div>
        <button class="music-control" id="musicToggle" onclick="toggleMusic()">
            üéµ
            <div class="music-tooltip" id="musicTooltip">Click to play music</div>
        </button>
    </div>
    
    <!-- Page 1: Birthday greeting -->
    <div class="page active" id="page1">
        <img src="c1j0k64shb.png" alt="Birthday character" class="header-img">
        <h1 class="title">H√† My c·ªßa anhüíñ</h1>

        <span class="emoji">(ÔΩ°‚óï‚Äø‚óïÔΩ°)</span>
        
        <p class="instruction">N·∫øu y√™u anh th√¨ ·∫•n v√†o n√∫t b√™n d∆∞·ªõi („Å§‚óïv‚óï)„Å§‚ô°</p>
        
        <button class="next-btn" onclick="showPage2()">Next!! ‚ô™ÔΩû‚ô™</button>
    </div>

    <!-- Page 2: Envelope question -->
    <div class="page" id="page2">
        <img src="lhwhk0jmgr.jpg" alt="Pink envelope" class="envelope-img">
        
        <p class="question-text">V·ª£ y√™u c√≥ mu·ªën m·ªü b·ª©c th∆∞ n√†y ra kh√¥ng ·ªç"„Éæ(ÔºÇ‚Ä¢ÃÄ_‚Ä¢ÃÅÔºÇ)„ÉéÔºÇ</p>
        
        <div class="button-container">
            <button class="choice-btn open-btn" onclick="openEnvelope()">C√≥ ·∫°</button>
            <button class="choice-btn no-btn" onclick="sayNo()">Nah</button>
        </div>
    </div>

    <!-- Letter Modal -->
    <div class="modal" id="letterModal">
        <div class="letter-container">
            <div class="letter-header">
                <h3 class="letter-title">G·ª≠i th·∫ø gi·ªõi c·ªßa anh (Ôæâ‚óïo‚óï)Ôæâ‚ô° !!</h3>
                <button class="close-btn" onclick="closeLetter()">√ó</button>
            </div>
            <div class="letter-content">
                <div class="letter-greeting" contenteditable="true">H√† My ·ªõi ·ªùi ·ª£i ∆°i
                </div>
                

                <div class="letter-text" contenteditable="true">
                    9 th√°ng m√¨nh b√™n nhau r√πi n√® c·ª• th·ªÉ h∆°n th√¨ ch√≠nh l√† 25/12/2024-25/09/2025, 274 ng√†y, 6,576 gi·ªù, 394,560 ph√∫t, 23,673,600 gi√¢y m√¨nh l√† c·ªßa nhau üíñüíñüíñ<br>
                    Trong th√°ng 9 n√†y m√¨nh ƒë√£ kh√¥ng c√≤n nh∆∞ th√°ng tr∆∞·ªõc ( ch·∫Øc l√† th√°ng ƒë·ªãa ng·ª•c trong 9 th√°ng y√™u nhau ) m√† m√¨nh ƒë√£ y√™u nhau nhi·ªÅu h∆°n v√† anh c·∫£m th·∫•y r·∫•t h·∫°nh ph√∫c v√¨ ƒëi·ªÅu ƒë√≥. Kh√¥ng nh·ªØng th·∫ø m√¨nh c√≤n d√†nh cho nhau nhi·ªÅu th·ªùi gian ·ªü b√™n nhau h∆°n nh·ªØng th√°ng tr∆∞·ªõc √° √° n√™n anh c√≥ c·∫£m gi√°c h√¥m n√†o c≈©ng ƒë∆∞·ª£c th·∫•y em hjhj, vui l·∫Øm lu√¥n ·ªõ. Nh∆∞ng ch·∫Øc l√† anh v·∫´n y√™u em nhi·ªÅu h∆°n em y√™u anh ƒë√≥ ƒë·ªì ng·ªëc ( ∆Ø·ªõc g√¨ c√°c th√°ng sau H√† My s·∫Ω √¥m m√¨nh nhi·ªÅu h∆°n v√¨ m√¨nh r·∫•t th√≠ch ƒë∆∞·ª£c H√† My √¥m, √† m√¨nh c√≤n th√≠ch em ·∫•y n√≥i y√™u m√¨nh n·ªØa hj ). Nh∆∞ng cu·ªëi c√πng th√¨ anh c≈©ng ch·ªâ mu·ªën n√≥i v·ªõi H√† My r·∫±ng anh y√™u em nhi·ªÅu l·∫Øm ·∫°, em c√≥ th·ªÉ tho·∫£i m√°i g√¢y s·ª±, nhi·ªÖu, d·ªói hay l√†m tr√≤ v·ªõi anh v√¨ anh kh√¥ng th·∫•y phi·ªÅn ƒë√¢u m√† ch·ªâ th·∫•y em cute th√¥i ·ªõ ·ªõ. Nh∆∞ng ch·∫Øc My kh√¥ng y√™u anh nh∆∞ th·∫ø r√πi huhuheoheo. √Ä :))))) ch·∫Øc th√°ng n√†y m√¨nh c√≤n update th√™m c·∫£ v·ªÅ ph·∫ßn s*x  n·ªØa nh·ªâ d√¢m n·ªØ, aish em c√†ng ng√†y c√†ng d√¢m thui (  anh th√≠ch l·∫Øm ). C√≤n n·ªØa, em b√© c·ªßa anh th√°ng n√†y ƒë√£ kh√¥ng c√≤n khok nhi·ªÅu nh∆∞ tr∆∞·ªõc v√† anh c·∫£m th·∫•y r·∫•c vui ƒë√≥, anh th√≠ch th·∫•y H√† My c∆∞·ªùi h∆°n √° √°. Gi·ªù l√† cu·ªëi c√πng th·∫≠t n√®, anh mong H√† My s·∫Ω c√†ng ng√†y c√†ng y√™u anh nhi·ªÅu th√™m  n·ªØa, kh√¥ng bao gi·ªù b·ªõt ƒëi x√≠u n√†o nh√° hjhj v√† anh c≈©ng z √° √°, c≈©ng nh∆∞ s·∫Ω lu√¥n lu√¥n may m·∫Øn v√† kh√¥ng g·∫∑p ph·∫£i b·∫•t c·ª© v·∫•n ƒë·ªÅ n√†o khi·∫øn My b√πn hjhj. ANH Y√äU H√Ä MY LAMMM! 
                </div>


                <div class="letter-signature" contenteditable="true">
                    Ng∆∞·ªùi y√™u em nh·∫•t tr√™n ƒë·ªùi,<br>
                    Cao Tr·∫ßn Trung üíñ
                </div>
                

            </div>
        </div>
    </div>

    <!-- Page 3: Please try again -->
    <div class="page" id="page3">
        <img src="mhdk5h7anz.jpg" alt="Crying character" class="crying-img">
        
        <h2 class="plea-title">ƒê·ª´ng m√†aa th·ª≠ l·∫°i ƒëiii</h2>
        <h2 class="plea-subtitle">PLEASEE?</h2>
        
        <div class="button-container">
            <button class="choice-btn open-btn" onclick="tryAgain()">Again..?</button>
        </div>
    </div>

    <script>
        // È¢ÑÂä†ËΩΩÂõæÁâá
        window.addEventListener('DOMContentLoaded', function() {
            const imagesToPreload = [
                '9yy3sxblhj.png',
                'lhwhk0jmgr.jpg',
                'rjonvzwh90.png', 
                'mhdk5h7anz.jpg',
                'd4enwza2ob.jpg'
            ];
            
            // È¢ÑÂä†ËΩΩÈü≥È¢ëÊñá‰ª∂
            const audioToPreload = [
                'xoa0x82ghj.mp3',
                '2568.wav'
            ];
            
            imagesToPreload.forEach(src => {
                const img = new Image();
                img.src = src;
            });
        });
        
        function showPage2() {
            document.getElementById('page1').classList.remove('active');
            document.getElementById('page2').classList.add('active');
        }

        function openEnvelope() {
            document.getElementById('letterModal').classList.add('active');
        }

        function closeLetter() {
            document.getElementById('letterModal').classList.remove('active');
        }

        function sayNo() {
            document.getElementById('page2').classList.remove('active');
            document.getElementById('page3').classList.add('active');
        }
        
        function finalNo() {
            alert('Okay, I understand... maybe next time! ü•∫');
            document.getElementById('page3').classList.remove('active');
            document.getElementById('page1').classList.add('active');
        }
        
        // Â¢ûÂº∫ÁöÑÈü≥‰πêÊéßÂà∂Á≥ªÁªü
        let isMusicPlaying = false;
        let currentVolume = 0.7; // ÈªòËÆ§Èü≥Èáè70%
        
        function initializeMusicControls() {
            const music = document.getElementById('bgMusic');
            const volumeSlider = document.getElementById('volumeSlider');
            const volumeLabel = document.getElementById('volumeLabel');
            
            // ËÆæÁΩÆÂàùÂßãÈü≥Èáè
            music.volume = currentVolume;
            
            // Èü≥ÈáèÊéßÂà∂‰∫ã‰ª∂
            volumeSlider.addEventListener('input', function() {
                currentVolume = this.value / 100;
                music.volume = currentVolume;
                volumeLabel.textContent = this.value + '%';
                
                // Êí≠ÊîæËΩªÂæÆÁöÑÈü≥ÊïàÂèçÈ¶à
                playClickSound();
            });
            
            // Èü≥‰πêÁªìÊùü‰∫ã‰ª∂
            music.addEventListener('ended', function() {
                updateMusicUI(false);
            });
            
            // Èü≥‰πêÊí≠Êîæ‰∫ã‰ª∂
            music.addEventListener('play', function() {
                updateMusicUI(true);
            });
            
            // Èü≥‰πêÊöÇÂÅú‰∫ã‰ª∂
            music.addEventListener('pause', function() {
                updateMusicUI(false);
            });
        }
        
        function updateMusicUI(playing) {
            const musicBtn = document.getElementById('musicToggle');
            const tooltip = document.getElementById('musicTooltip');
            
            isMusicPlaying = playing;
            
            if (playing) {
                musicBtn.innerHTML = 'üîá<div class="music-tooltip" id="musicTooltip">Music playing - Click to pause</div>';
                musicBtn.classList.add('playing');
                tooltip.textContent = 'Music playing - Click to pause';
            } else {
                musicBtn.innerHTML = 'üéµ<div class="music-tooltip" id="musicTooltip">Click to play music</div>';
                musicBtn.classList.remove('playing');
                tooltip.textContent = 'Click to play music';
            }
        }
        
        function toggleMusic() {
            const music = document.getElementById('bgMusic');
            
            // Êí≠ÊîæÁÇπÂáªÈü≥Êïà
            playClickSound();
            
            if (isMusicPlaying) {
                music.pause();
            } else {
                music.play().catch(e => {
                    console.log('Èü≥‰πêÊí≠ÊîæÂ§±Ë¥•:', e.message);
                    // ÊòæÁ§∫Áî®Êà∑ÂèãÂ•ΩÁöÑÈîôËØØÊèêÁ§∫
                    showMusicError();
                });
            }
        }
        
        function showMusicError() {
            const tooltip = document.getElementById('musicTooltip');
            const originalText = tooltip.textContent;
            tooltip.textContent = 'Music blocked - Try clicking again';
            tooltip.style.background = 'rgba(255, 100, 100, 0.9)';
            
            setTimeout(() => {
                tooltip.textContent = originalText;
                tooltip.style.background = 'rgba(0, 0, 0, 0.8)';
            }, 2000);
        }
        
        // ÁÇπÂáªÈü≥ÊïàÂáΩÊï∞
        function playClickSound() {
            const clickSound = document.getElementById('clickSound');
            clickSound.currentTime = 0; // ÈáçÁΩÆÈü≥È¢ëÂà∞ÂºÄÂ§¥
            clickSound.play().catch(e => {
                // ÂøΩÁï•ÈîôËØØ
                console.log('ÁÇπÂáªÈü≥ÊïàÊí≠ÊîæÂ§±Ë¥•');
            });
        }
        
        // Â§ÑÁêÜ‰∫§‰∫íÂºÄÂßãÊó∂Ëá™Âä®Êí≠ÊîæÈü≥‰πê
        document.addEventListener('click', function() {
            if (!isMusicPlaying) {
                const music = document.getElementById('bgMusic');
                music.play().catch(e => {
                    console.log('ÂàùÂßãÈü≥‰πêÊí≠ÊîæË¢´ÈòªÊ≠¢');
                });
            }
        }, { once: true });
        
        // ‰∏∫ÊâÄÊúâÊåâÈíÆÊ∑ªÂä†ÁÇπÂáªÈü≥Êïà
        document.addEventListener('DOMContentLoaded', function() {
            // Ëé∑ÂèñÊâÄÊúâÊåâÈíÆ
            const buttons = document.querySelectorAll('button, .choice-btn, .next-btn, .save-btn, .music-control');
            
            // ‰∏∫ÊØè‰∏™ÊåâÈíÆÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂ÁõëÂê¨Âô®
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    playClickSound();
                });
            });
            
            // ‰∏∫ÂèØÁºñËæëÁöÑÊñáÊú¨Âå∫ÂüüÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂ÂíåËá™Âä®‰øùÂ≠òÂäüËÉΩ
            const editableElements = document.querySelectorAll('[contenteditable="true"]');
            editableElements.forEach(element => {
                // Ê∑ªÂä†ÁÇπÂáªÈü≥Êïà
                element.addEventListener('click', function() {
                    playClickSound();
                });
                
                // Ê∑ªÂä†ËæìÂÖ•‰∫ã‰ª∂ÁõëÂê¨ÔºåÂÆûÁé∞Ëá™Âä®‰øùÂ≠ò
                element.addEventListener('input', function() {
                    // ÂΩìÂÜÖÂÆπÊîπÂèòÊó∂Ëá™Âä®‰øùÂ≠ò
                    saveLetterContent(false); // falseË°®Á§∫‰∏çÊòæÁ§∫ÊèêÁ§∫
                });
                
                // Ê∑ªÂä†Â§±ÂéªÁÑ¶ÁÇπ‰∫ã‰ª∂ÔºåÁ°Æ‰øùÁºñËæëÂÆåÊàêÊó∂‰øùÂ≠ò
                element.addEventListener('blur', function() {
                    saveLetterContent(false);
                });
            });
        });
        
        function tryAgain() {
            document.getElementById('page3').classList.remove('active');
            document.getElementById('page1').classList.add('active');
        }
        
        function saveLetterContent(showAlert = true) {
            if (showAlert) {
                alert('Content saved! üíå');
            }
            
            // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®ÁöÑ‰ª£Á†Å
            const letterGreeting = document.querySelector('.letter-greeting').innerText;
            const letterTexts = [...document.querySelectorAll('.letter-text')].map(el => el.innerText);
            const letterSignature = document.querySelector('.letter-signature').innerHTML;
            
            // ‰øùÂ≠òÂà∞localStorage
            localStorage.setItem('letterContent', JSON.stringify({
                greeting: letterGreeting,
                texts: letterTexts,
                signature: letterSignature
            }));
        }
        
        // Âä†ËΩΩ‰øùÂ≠òÁöÑÂÜÖÂÆπ
        function loadSavedContent() {
            const savedContent = localStorage.getItem('letterContent');
            
            if (savedContent) {
                try {
                    const content = JSON.parse(savedContent);
                    
                    // ÊÅ¢Â§çÂÜÖÂÆπ
                    document.querySelector('.letter-greeting').innerText = content.greeting;
                    
                    const textElements = document.querySelectorAll('.letter-text');
                    content.texts.forEach((text, index) => {
                        if (textElements[index]) {
                            textElements[index].innerText = text;
                        }
                    });
                    
                    document.querySelector('.letter-signature').innerHTML = content.signature;
                } catch (e) {
                    console.error('Failed to load saved content', e);
                }
            }
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        window.addEventListener('DOMContentLoaded', function() {
            loadSavedContent();
            initializeMusicControls();
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('letterModal');
            if (event.target === modal) {
                closeLetter();
            }
        }
    </script>
</body>
</html>


